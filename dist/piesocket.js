var PieSocket;PieSocket=(()=>{var e={897:(e,o,t)=>{"use strict";t.d(o,{default:()=>r});class n{constructor(e){this.options=e}log(...e){this.options.consoleLogs&&console.log(...e)}warn(...e){this.options.consoleLogs&&console.warn(...e)}error(...e){this.options.consoleLogs&&console.error(...e)}}class s{constructor(e,o){this.endpoint=e,this.identity=o,this.connection=this.connect(),this.events={},this.shouldReconnect=!0,this.logger=new n(o)}connect(){var e=new WebSocket(this.endpoint);return e.onmessage=this.onMessage.bind(this),e.onopen=this.onOpen.bind(this),e.onerror=this.onError.bind(this),e.onclose=this.onClose.bind(this),e}on(e,o){this.events[e]=o}onMessage(e){this.logger.log("Channel message:",e);try{JSON.parse(e.data).error.length&&(this.shouldReconnect=!1)}catch(e){}this.events.message&&this.events.message.bind(this)(e)}onOpen(e){this.logger.log("Channel connected:",e),this.events.open&&this.events.open.bind(this)(e)}onError(e){this.logger.error("Channel error:",e),this.connection.close(),this.events.error&&this.events.error.bind(this)(e)}onClose(e){this.logger.warn("Channel closed:",e),this.reconnect(),this.events.close&&this.events.close.bind(this)(e)}reconnect(){this.shouldReconnect&&(this.logger.log("Reconnecting"),this.connect())}}const i={version:3,clusterId:"demo",apiKey:"oCdCMcMPQpbvNjUIzqtvF1d2X2okWpDQj4AwARJuAgtjhzKxVEjQU6IdCjwm",consoleLogs:!1,notifySelf:!0};class r{constructor(e){e=e||{},this.options={...i,...e},this.connections={},this.logger=new n(this.options)}subscribe(e){var o=this.getEndpoint(e);if(this.connections[e])return this.logger.log("Returning existing channel",o),this.connections[e];this.logger.log("Creating new channel",o);var t=new s(o,{channelId:e,...this.options});return this.connections[e]=t,t}getEndpoint(e){return`wss://${this.options.clusterId}.websocket.me/v${this.options.version}/${e}?api_key=${this.options.apiKey}&notify_self=${this.options.notifySelf}&source=jssdk`}}},138:(e,o,t)=>{e.exports=t(897).default}},o={};function t(n){if(o[n])return o[n].exports;var s=o[n]={exports:{}};return e[n](s,s.exports,t),s.exports}return t.d=(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},t.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),t(138)})();